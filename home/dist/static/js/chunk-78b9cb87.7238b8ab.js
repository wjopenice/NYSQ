(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78b9cb87"],{"089a":function(t,e,a){"use strict";var i=a("3a23"),n=a.n(i);n.a},"0bad":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n      搜索\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("\n      添加商品\n    ")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merc_name",label:"商家",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"p_name",label:"商品名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"p_description",label:"商品描述",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品BANNER",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.p_banner,width:"100"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上新",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#00FF00","inactive-color":"#999999"},on:{change:function(a){return t.handleNews(e.row)}},model:{value:e.row.p_news,callback:function(a){t.$set(e.row,"p_news",a)},expression:"scope.row.p_news"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"热销",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#00FF00","inactive-color":"#999999"},on:{change:function(a){return t.handleHot(e.row)}},model:{value:e.row.p_hot,callback:function(a){t.$set(e.row,"p_hot",a)},expression:"scope.row.p_hot"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"推荐",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#00FF00","inactive-color":"#999999"},on:{change:function(a){return t.handleTop(e.row)}},model:{value:e.row.p_top,callback:function(a){t.$set(e.row,"p_top",a)},expression:"scope.row.p_top"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{on:{focus:function(a){return t.handleSort(e.row)}},model:{value:e.row.p_sort,callback:function(a){t.$set(e.row,"p_sort",a)},expression:"scope.row.p_sort"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){return t.handleEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"success"}},[t._v("上架")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"warning"}},[t._v("下架")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"750px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"110px"}},[a("el-form-item",{attrs:{label:"选择商家"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"640px"},attrs:{name:"op_id"},on:{change:t.selectData},model:{value:t.couponSelected,callback:function(e){t.couponSelected=e},expression:"couponSelected"}},t._l(t.merc,(function(t){return a("el-option",{key:t.m_id,attrs:{label:t.merc_name,value:t.m_id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{model:{value:t.temp.p_name,callback:function(e){t.$set(t.temp,"p_name",e)},expression:"temp.p_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品描述"}},[a("el-input",{attrs:{name:"b_d_info",rows:3,type:"textarea",placeholder:"请填写描述信息"},model:{value:t.temp.p_description,callback:function(e){t.$set(t.temp,"p_description",e)},expression:"temp.p_description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品BANNER"}},[a("el-upload",{attrs:{action:t.uploadUri,"file-list":t.temp.p_banner,"list-type":"picture-card",icon:"el-icon-upload",limit:1,"auto-upload":!0,"on-success":t.imgsuccess1}},[t._v("上传BANNER图片")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品细节图1"}},[a("el-upload",{attrs:{action:t.uploadUri,"file-list":t.temp.p_pic1,"list-type":"picture-card",icon:"el-icon-upload",limit:1,"auto-upload":!0,"on-success":t.imgsuccess2}},[t._v("上传细节图1")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品细节图2"}},[a("el-upload",{attrs:{action:t.uploadUri,"file-list":t.temp.p_pic2,"list-type":"picture-card",icon:"el-icon-upload",limit:1,"auto-upload":!0,"on-success":t.imgsuccess3}},[t._v("上传细节图2")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品细节图3"}},[a("el-upload",{attrs:{action:t.uploadUri,"file-list":t.temp.p_pic3,"list-type":"picture-card",icon:"el-icon-upload",limit:1,"auto-upload":!0,"on-success":t.imgsuccess4}},[t._v("上传细节图3")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品细节图4"}},[a("el-upload",{attrs:{action:t.uploadUri,"file-list":t.temp.p_pic4,"list-type":"picture-card",icon:"el-icon-upload",limit:1,"auto-upload":!0,"on-success":t.imgsuccess5}},[t._v("上传细节图4")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品细节图5"}},[a("el-upload",{attrs:{action:t.uploadUri,"file-list":t.temp.p_pic5,"list-type":"picture-card",icon:"el-icon-upload",limit:1,"auto-upload":!0,"on-success":t.imgsuccess6}},[t._v("上传细节图5")])],1),t._v(" "),a("el-form-item",{attrs:{label:"上新"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#00FF00","inactive-color":"#999999"},on:{change:function(e){return t.handleStatus(t.temp.p_news,"news")}},model:{value:t.temp.p_news,callback:function(e){t.$set(t.temp,"p_news",e)},expression:"temp.p_news"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"热销"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#00FF00","inactive-color":"#999999"},on:{change:function(e){return t.handleStatus(t.temp.p_hot,"hot")}},model:{value:t.temp.p_hot,callback:function(e){t.$set(t.temp,"p_hot",e)},expression:"temp.p_hot"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推荐"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#00FF00","inactive-color":"#999999"},on:{change:function(e){return t.handleStatus(t.temp.p_top,"top")}},model:{value:t.temp.p_top,callback:function(e){t.$set(t.temp,"p_top",e)},expression:"temp.p_top"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{margin:"30px 0 0 163px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n        保存\n      ")])],1)],1)],1)},n=[],o=a("b775");function s(t){return Object(o["a"])({url:"/shop/shoplist",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/shop/shopsort",method:"get",params:t})}function c(t){return Object(o["a"])({url:"/shop/shopswitch",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/shop/remove",method:"get",params:t})}function p(t){return Object(o["a"])({url:"/shop/shopadd",method:"get",params:t})}function u(t){return Object(o["a"])({url:"/shop/shopfind",method:"get",params:t})}function d(t){return Object(o["a"])({url:"/shop/shopedit",method:"get",params:t})}var m=a("6724"),f=a("333d"),h={name:"ShopIndex",directives:{waves:m["a"]},components:{Pagination:f["a"]},inject:["reload"],data:function(){return{editid:void 0,listLoading:!0,total:0,dialogFormVisible:!1,dialogStatus:"",list:[],merc:"",reqdata:{},uploadUri:this.GLOBAL.upload_url,textMap:{update:"修改",create:"添加"},listQuery:{page:1,limit:10,importance:void 0,search:void 0,sort:"+id"},temp:{m_id:void 0,p_name:void 0,p_description:"",p_banner:"",p_pic1:"",p_pic2:"",p_pic3:"",p_pic4:"",p_pic5:"",p_news:0,p_hot:0,p_top:0,p_sort:0},rules:{},couponSelected:""}},created:function(){this.getList()},methods:{getList:function(){var t=this;s(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.merc=e.data.merc,t.couponSelected=t.merc[0].id,setTimeout((function(){t.listLoading=!1}),1500)}))},selectData:function(t){this.temp.m_id=t},handleFilter:function(){this.listQuery.page=1,this.getList()},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},resetTemp:function(){this.temp={m_id:void 0,p_name:void 0,p_description:void 0,p_banner:void 0,p_pic1:void 0,p_pic2:void 0,p_pic3:void 0,p_pic4:void 0,p_pic5:void 0,p_news:0,p_hot:0,p_top:0,p_sort:0}},handleDelete:function(t){var e=this;this.reqdata={},this.reqdata.id=t,l(this.reqdata).then((function(t){"success"===t.data?(e.$message.success("操作成功"),setTimeout((function(){e.reload()}),1500)):e.$message.error("操作失败")}))},handleNews:function(t){var e=this;this.reqdata={},this.reqdata.id=t.id,this.reqdata.status=t.p_news,this.reqdata.type="news",c(this.reqdata).then((function(t){"success"===t.data?e.$message.success("操作成功"):e.$message.error("操作失败")}))},handleHot:function(t){var e=this;this.reqdata={},this.reqdata.id=t.id,this.reqdata.status=t.p_hot,this.reqdata.type="hot",c(this.reqdata).then((function(t){"success"===t.data?e.$message.success("操作成功"):e.$message.error("操作失败")}))},handleTop:function(t){var e=this;this.reqdata={},this.reqdata.id=t.id,this.reqdata.status=t.p_top,this.reqdata.type="top",c(this.reqdata).then((function(t){"success"===t.data?e.$message.success("操作成功"):e.$message.error("操作失败")}))},handleSort:function(t){var e=this;this.reqdata={},this.reqdata.id=t.id,this.reqdata.status=t.p_sort,r(this.reqdata).then((function(t){"success"===t.data?e.$message.success("操作成功"):e.$message.error("操作失败")}))},handleEdit:function(t){var e=this;this.reqdata={},this.reqdata.shop_id=t,this.editid=t,u(this.reqdata).then((function(t){e.couponSelected=t.data.items.m_id,e.temp=t.data.items,e.temp.p_banner=""===t.data.items.p_banner?void 0:t.data.items.p_banner,e.temp.p_pic1=""===t.data.items.p_pic1?void 0:t.data.items.p_pic1,e.temp.p_pic2=""===t.data.items.p_pic2?void 0:t.data.items.p_pic2,e.temp.p_pic3=""===t.data.items.p_pic3?void 0:t.data.items.p_pic3,e.temp.p_pic4=""===t.data.items.p_pic4?void 0:t.data.items.p_pic4,e.temp.p_pic5=""===t.data.items.p_pic5?void 0:t.data.items.p_pic5,e.dialogStatus="update",e.dialogFormVisible=!0,e.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}))},handleStatus:function(t,e){switch(e){case"news":this.temp.p_news=t;break;case"hot":this.temp.p_hot=t;break;case"top":this.temp.p_top=t;break}},imgsuccess1:function(t){this.temp.p_banner=t.data},imgsuccess2:function(t){this.temp.p_pic1=t.data},imgsuccess3:function(t){this.temp.p_pic2=t.data},imgsuccess4:function(t){this.temp.p_pic3=t.data},imgsuccess5:function(t){this.temp.p_pic4=t.data},imgsuccess6:function(t){this.temp.p_pic5=t.data},createData:function(){var t=this;p(this.temp).then((function(e){"success"===e.data?(t.$message.success("操作成功"),setTimeout((function(){t.reload()}),1500)):t.$message.error("操作失败")}))},updateData:function(){var t=this;this.temp.id=this.editid,d(this.temp).then((function(e){"success"===e.data?(t.$message.success("操作成功"),setTimeout((function(){t.reload()}),1500)):t.$message.error("操作失败")}))}}},v=h,_=(a("089a"),a("2877")),g=Object(_["a"])(v,i,n,!1,null,"44dfc66c",null);e["default"]=g.exports},"333d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(t,e,a){var i=r(),n=t-i,c=20,l=0;e="undefined"===typeof e?500:e;var p=function t(){l+=c;var r=Math.easeInOutQuad(l,i,n,e);s(r),l<e?o(t):a&&"function"===typeof a&&a()};p()}var l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&c(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},p=l,u=(a("e498"),a("2877")),d=Object(u["a"])(p,i,n,!1,null,"6af373ef",null);e["a"]=d.exports},"3a23":function(t,e,a){},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function n(t,e){function a(a){var i=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),o=n.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),r=o.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(s.width,s.height)+"px",o.appendChild(r)),n.type){case"center":r.style.top=s.height/2-r.offsetHeight/2+"px",r.style.left=s.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-s.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-s.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=n.color,r.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var o={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},s=function(t){t.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(s)),o.install=s;e["a"]=o},7456:function(t,e,a){},"8d41":function(t,e,a){},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),o=a("79e5"),s=a("fdef"),r="["+s+"]",c="​",l=RegExp("^"+r+r+"*"),p=RegExp(r+r+"*$"),u=function(t,e,a){var n={},r=o((function(){return!!s[t]()||c[t]()!=c})),l=n[t]=r?e(d):s[t];a&&(n[a]=l),i(i.P+i.F*r,"String",n)},d=u.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(p,"")),t};t.exports=u},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),o=a("2d95"),s=a("5dbc"),r=a("6a99"),c=a("79e5"),l=a("9093").f,p=a("11e9").f,u=a("86cc").f,d=a("aa77").trim,m="Number",f=i[m],h=f,v=f.prototype,_=o(a("2aeb")(v))==m,g="trim"in String.prototype,b=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():d(e,3);var a,i,n,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var s,c=e.slice(2),l=0,p=c.length;l<p;l++)if(s=c.charCodeAt(l),s<48||s>n)return NaN;return parseInt(c,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(_?c((function(){v.valueOf.call(a)})):o(a)!=m)?s(new h(b(e)),a,f):b(e)};for(var w,y=a("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;y.length>S;S++)n(h,w=y[S])&&!n(f,w)&&u(f,w,p(h,w));f.prototype=v,v.constructor=f,a("2aba")(i,m,f)}},e498:function(t,e,a){"use strict";var i=a("7456"),n=a.n(i);n.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);